<nz-layout class="root">
  <header>
    <div class="brand">
      <a routerLink="/">FitMonitor</a>
    </div>
    <nav>
      <ul nz-menu [nzMode]="menuMode()" [class.is-open]="isOpen()">
        @for (nav of navigation(); track nav.title) {
          <li
            nz-menu-item
            [nzMatchRouter]="$index === 0"
            [nzMatchRouterExact]="$index === 0"
            [nzSelected]="nav.routerLink === currentRoute()"
          >
            <a [routerLink]="nav.routerLink">
              <span
                nz-icon
                class="pr-3"
                nzTheme="outline"
                [nzType]="nav.icon"
              ></span>
              {{ nav.title | translate }}
            </a>
          </li>
        }
        <li nz-menu-item class="without-border p-3">
          <button
            nz-button
            nz-dropdown
            nzType="text"
            nzPlacement="bottomRight"
            [nzDropdownMenu]="themeMenu"
          >
            <span nz-icon nzType="bg-colors" nzTheme="outline"></span>
          </button>
          <nz-dropdown-menu #themeMenu="nzDropdownMenu">
            <ul nz-menu>
              @for (theme of themeOptions; track theme.local) {
                <li nz-menu-item (click)="changeTheme(theme.value)">
                  {{ theme.local | translate }}
                </li>
              }
            </ul>
          </nz-dropdown-menu>
        </li>
        <li nz-menu-item class="without-border p-3">
          <button
            nz-button
            nz-dropdown
            nzType="text"
            nzPlacement="bottomRight"
            [nzDropdownMenu]="languageMenu"
          >
            <span nz-icon nzType="global" nzTheme="outline"></span>
          </button>
          <nz-dropdown-menu #languageMenu="nzDropdownMenu">
            <ul nz-menu>
              @for (language of languages; track language.local) {
                <li
                  nz-menu-item
                  class="d-flex gap-3 space-between"
                  (click)="changeLanguage(language.local)"
                >
                  <img
                    class="flag"
                    [src]="language.image"
                    [alt]="'general.country-image' | translate"
                  />
                  {{ language.title }}
                </li>
              }
            </ul>
          </nz-dropdown-menu>
        </li>
      </ul>
      <button
        nz-button
        class="burger"
        [attr.aria-expanded]="isOpen()"
        (click)="toggle()"
      >
        <span nz-icon [nzType]="isOpen() ? 'close' : 'menu'"></span>
      </button>
    </nav>
  </header>
  <nz-content>
    <router-outlet></router-outlet>
  </nz-content>
</nz-layout>
