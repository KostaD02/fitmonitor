<nz-layout class="inner">
  @if (this.usersData()) {
    <section class="wrap">
      @if (this.usersData()?.schedules; as schedules) {
        <section class="schedules">
          @if (schedules?.length !== 0) {
            <nz-tabset>
              @for (schedule of schedules; track schedule._id) {
                <nz-tab [nzTitle]="schedule.name">
                  <fitmonitor-schedule
                    [schedule]="schedule"
                    [isPreview]="true"
                  ></fitmonitor-schedule>
                </nz-tab>
              }
            </nz-tabset>
          } @else {
            <nz-empty nzNotFoundContent="No schedules found"></nz-empty>
          }
        </section>
      }
      @if (this.usersData()?.calendars; as calendars) {
        <section class="calendars">
          @if (calendars?.length !== 0) {
            <nz-tabset>
              @for (calendar of calendars; track calendar._id) {
                <nz-tab [nzTitle]="calendar.name">
                  <fitmonitor-calendar
                    [calendar]="calendar"
                    [isPreview]="true"
                  ></fitmonitor-calendar>
                </nz-tab>
              }
            </nz-tabset>
          } @else {
            <nz-empty nzNotFoundContent="No calendars found"></nz-empty>
          }
        </section>
      }
    </section>
    @if (this.usersData()?.metrics; as metrics) {
      <section class="metrics">
        @if (metrics?.length !== 0) {
          <nz-tabset>
            @for (metric of metrics; track metric._id) {
              <nz-tab [nzTitle]="metric.name">
                <fitmonitor-metric
                  [metric]="metric"
                  [isPreview]="true"
                ></fitmonitor-metric>
              </nz-tab>
            }
          </nz-tabset>
        } @else {
          <nz-empty nzNotFoundContent="No metrics found"></nz-empty>
        }
      </section>
    }
  } @else {
    <section class="authorize flex-center">
      <nz-empty nzNotFoundContent="Authorize to see your data"></nz-empty>
    </section>
  }
</nz-layout>
